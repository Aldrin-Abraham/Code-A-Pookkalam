<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Code a Pookkalam</title>
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2&family=Manjari&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      background-color: #0D4C3A;
      background-image: 
        linear-gradient(to right, rgba(255,255,255,0.2) 1px, transparent 1px),
        linear-gradient(to bottom, rgba(255,255,255,0.2) 1px, transparent 1px);
      background-size: 80px 80px;
      color: white;
    }

    .title {
      position: absolute;
      top: 20px;
      text-align: center;
      font-size: 2.5rem;
      font-weight: bold;
    }

    .malayalam {
      font-family: 'Manjari', sans-serif;
    }

    .english {
      font-family: 'Baloo 2', cursive;
    }

    svg{
      width:80vmin;
      height:80vmin;
      display:block;
    }

    .footer {
      position: absolute;
      bottom: 10px;
      text-align: center;
      font-size: 1rem;
      font-family: 'Baloo 2', cursive;
      color: white;
    }

    .footer a {
      color: #ffd166;
      text-decoration: none;
      font-weight: bold;
    }

    .footer a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <div class="title">
    <span class="malayalam">കോ</span><span class="english">de</span>
    <span class="malayalam"> എ പൂ</span><span class="english">kka</span><span class="malayalam">ളം</span>
  </div>

  <!-- Pookkalam -->
  <svg id="pookkalam" viewBox="-300 -300 600 600" aria-label="Onam Pookkalam"></svg>

  <!-- Footer -->
  <div class="footer">
    Made by <a href="https://github.com/Aldrin-Abraham" target="_blank">Aldrin Abraham</a>
  </div>

  <script>
  const TAU = Math.PI * 2;
  const svgNS = "http://www.w3.org/2000/svg";
  const S = (name, attrs={})=>{
    const el = document.createElementNS(svgNS, name);
    for (const [k,v] of Object.entries(attrs)) el.setAttribute(k, v);
    return el;
  };

  function annularSectorPath(cx, cy, r0, r1, a0, a1){
    const c0x = cx + r1*Math.cos(a0), c0y = cy + r1*Math.sin(a0);
    const c1x = cx + r1*Math.cos(a1), c1y = cy + r1*Math.sin(a1);
    const i1x = cx + r0*Math.cos(a1), i1y = cy + r0*Math.sin(a1);
    const i0x = cx + r0*Math.cos(a0), i0y = cy + r0*Math.sin(a0);
    const large = (a1-a0) % TAU > Math.PI ? 1 : 0;
    return [
      `M ${c0x} ${c0y}`,
      `A ${r1} ${r1} 0 ${large} 1 ${c1x} ${c1y}`,
      `L ${i1x} ${i1y}`,
      `A ${r0} ${r0} 0 ${large} 0 ${i0x} ${i0y}`,
      "Z"
    ].join(" ");
  }

  //drawing parameters
  const R   = 280, rRim = 268, rBandOuter = 252, rBandInner = 210;
  const rPetalOuterBack = 205, rPetalInnerBack = 135;
  const rPetalOuterFront = 190, rPetalInnerFront = 125;
  const rInnerRingOuter  = 115, rInnerRingInner  = 100;
  const rCore = 86, rPinwheel = 78;

  //colors
  const gold  = "#e2b23a", green = "#226b31";
  const petalBack = "#a32323", petalFront = "#d45838";
  const innerPetal = "#c55a63", coreLight  = "#f3dca5";
  const orange = "#e0702e", cream = "#f6e6c8";
  const yellow = "#f9d64a", darkOrange = "#c45a1f";

  //build
  const svg = document.getElementById("pookkalam");

  svg.appendChild(S("circle",{ r:R, fill:gold }));
  svg.appendChild(S("circle",{ r:rBandOuter, fill:green }));
  svg.appendChild(S("circle",{ r:rBandInner, fill:gold }));

  const N = 16, sector = TAU / N;
  for (let i=0;i<N;i++){
    const a0 = i*sector, a1 = (i+1)*sector;

    const pBack = S("path",{ d: annularSectorPath(0,0, rPetalInnerBack, rPetalOuterBack, a0+0.02, a1-0.02), fill: petalBack });
    svg.appendChild(pBack);

    const offset = sector/2;
    const q0 = a0 + offset + 0.02, q1 = a1 + offset - 0.02;
    const pFront = S("path",{ d: annularSectorPath(0,0, rPetalInnerFront, rPetalOuterFront, q0, q1), fill: petalFront });
    svg.appendChild(pFront);

    const inner = S("path",{ d: annularSectorPath(0,0, rPetalInnerFront+12, rPetalOuterFront-22, q0, q1), fill: innerPetal, opacity: 0.55 });
    svg.appendChild(inner);
  }

  svg.appendChild(S("circle",{ r:rInnerRingOuter, fill:gold }));
  svg.appendChild(S("circle",{ r:rInnerRingInner, fill:orange }));
  svg.appendChild(S("circle",{ r:rCore, fill:coreLight }));

  const M = 12;
  const step = TAU / M;
  const tilt = step/2;
  
  for (let k=0;k<M;k++){
    const a = k*step + tilt;
    
    const outerTriSize = 15;
    const outerR = rCore + 10;
    const a1 = a - step/4;
    const a2 = a + step/4;
    
    const ox1 = outerR * Math.cos(a1), oy1 = outerR * Math.sin(a1);
    const ox2 = (outerR + outerTriSize) * Math.cos(a), oy2 = (outerR + outerTriSize) * Math.sin(a);
    const ox3 = outerR * Math.cos(a2), oy3 = outerR * Math.sin(a2);
    
    const outerTri = S("path",{ 
      d: `M ${ox1} ${oy1} L ${ox2} ${oy2} L ${ox3} ${oy3} Z`, 
      fill: (k%2===0)? darkOrange : yellow
    });
    svg.appendChild(outerTri);
    
    const a0 = a - step/2;
    const a3 = a + step/2;
    const x0 = rPinwheel*Math.cos(a0), y0 = rPinwheel*Math.sin(a0);
    const x1 = rPinwheel*Math.cos(a3), y1 = rPinwheel*Math.sin(a3);
    
    const tri = S("path",{ 
      d:`M 0 0 L ${x0} ${y0} L ${x1} ${y1} Z`, 
      fill: (k%3===0)? orange : (k%3===1)? cream : yellow
    });
    svg.appendChild(tri);
    
    const innerR = rPinwheel - 20;
    const innerSize = 8;
    const ia1 = a - step/6;
    const ia2 = a + step/6;
    
    const ix1 = innerR * Math.cos(ia1), iy1 = innerR * Math.sin(ia1);
    const ix2 = (innerR + innerSize) * Math.cos(a), iy2 = (innerR + innerSize) * Math.sin(a);
    const ix3 = innerR * Math.cos(ia2), iy3 = innerR * Math.sin(ia2);
    
    const innerTri = S("path",{ 
      d: `M ${ix1} ${iy1} L ${ix2} ${iy2} L ${ix3} ${iy3} Z`, 
      fill: (k%2===0)? cream : darkOrange
    });
    svg.appendChild(innerTri);
  }

  svg.appendChild(S("circle",{ r:20, fill:cream }));
  svg.appendChild(S("circle",{ r:16, fill:yellow }));
  svg.appendChild(S("circle",{ r:8, fill:orange }));
  
  for (let i = 0; i < 8; i++) {
    const angle = i * (TAU / 8);
    const r = 30;
    const x = r * Math.cos(angle);
    const y = r * Math.sin(angle);
    
    const dot = S("circle", {
      cx: x,
      cy: y,
      r: 3,
      fill: cream
    });
    svg.appendChild(dot);
  }

  svg.appendChild(S("circle",{ r:rRim, fill:"none", stroke:gold, "stroke-width":8 }));
  </script>
</body>
</html>
